# 보너스 상태 및 경고 메시지 UX 가이드 (v0.1)

## 1. 목적
- 관리자·사용자 화면에서 보너스 관련 상태(지급/보류/실패/재시도)를 일관된 톤앤매너로 전달한다.
- 경고·알림의 시각적 우선순위와 후속 액션을 명확히 정의해 운영 효율과 신뢰성을 높인다.
- 다국어 확장을 고려한 짧고 명확한 카피 원칙을 제시한다.

## 2. 상태 정의
| 상태 | 설명 | 기본 색상 토큰 | 아이콘 |
| --- | --- | --- | --- |
| `confirmed` | 지급 완료, 지갑 반영 | `colors.status.success` | `ri-check-line` |
| `pending` | 지급 예정, 검증 중 | `colors.status.info` | `ri-time-line` |
| `on_hold` | 보류(위험 탐지/서류 검토) | `colors.status.warning` | `ri-alert-line` |
| `retrying` | 재시도 큐에서 처리 중 | `colors.status.neutral` | `ri-refresh-line` |
| `failed` | 지급 실패, 수동 조치 필요 | `colors.status.danger` | `ri-error-warning-line` |

- 배경/텍스트 대비: 최소 4.5:1 유지. 배경은 16% 투명도, 텍스트는 본문 색상.
- 상태 배지는 `typography.label.sm` 사용, 원형 라운드 16px.

## 3. 사용자 카피 원칙
- 문장 길이 ≤ 50자, 동사 우선: `지급 완료`, `검토 중입니다`, `재시도 준비 중`.
- 원인 + 조치 구조(가능한 경우): `위험 탐지로 보류되었습니다. 신분증을 다시 제출해주세요.`
- 기술 용어 최소화, 필수 정보만 표기(금액, 주문 ID, 예상 처리일 등).
- 다국어 대비: 변수(금액, 날짜)는 `{amount}`, `{date}` 플레이스홀더로 처리.

## 4. 화면별 패턴

### 4.1 관리자 대시보드
- **알림 배너 (상단)**
  - 트리거: `failed` ≥ 1건, `retrying` SLA 초과(30분).
  - 카피 예시: `보너스 지급 실패 3건이 감지되었습니다. 즉시 확인이 필요합니다.`
  - 액션: Primary 버튼 `보너스 큐 열기`.
- **리스트/테이블**
  - 상태 컬럼에 배지 + Tooltip(세부 사유).
  - 보류 항목 클릭 시 사이드 패널 → 조치 버튼(`보류 해제`, `재시도 실행`).
- **토스트**
  - 성공: `보너스 지급이 완료되었습니다.`
  - 실패: `재시도 중 오류가 발생했습니다. 로그를 확인하세요.`
  - 지속시간: 성공 3초, 실패 6초 + 닫기 버튼.

### 4.2 사용자 웹앱
- **상태 카드 (지갑/보너스 탭)**
  - `pending`: `지급 대기 중입니다. 최대 24시간 소요될 수 있습니다.`
  - `on_hold`: `보류 중입니다. 문서 검토가 완료되면 알림을 드리겠습니다.`
- **모달 경고**
  - 출금 요청 시 보류/실패 여부 안내, Primary CTA `지원팀 문의`.
- **이메일/푸시**
  - 보류: `안녕하세요, {user_name}님. 보너스 {amount} KRW가 검토를 위해 보류되었습니다. 제출하신 자료를 확인 후 다시 안내드리겠습니다.`
  - 실패: `보너스 지급이 실패하여 재시도 준비 중입니다. 자세한 내용은 앱 알림을 확인해주세요.`

## 5. 시각 우선순위
- 우선순위 레벨
  1. **Critical (`failed`)**: 빨강 배경, 페이지 상단 띠 배너 + 모달. 사용자 조치 필수.
  2. **Warning (`on_hold`, SLA 초과 `retrying`)**: 노랑/주황 배경, 카드/토스트.
  3. **Info (`pending`)**: 파랑 배경, 카드 내 라벨.
  4. **Success (`confirmed`)**: 초록 배지, 향후 기록용.
- 동일 화면 내 최대 2개 경고 요소만 동시에 노출. 우선순위가 높은 메시지가 다른 메시지를 가린다.

## 6. 인터랙션 & 상태 전환
- 상태 변경 이벤트(`bonus.status.changed`) 수신 시
  - UI 배지 업데이트 → 토스트 노출 → 히스토리 로그 기록.
  - 보류 → 재시도 → 성공/실패 시 히스토리 타임라인에 타임스탬프 기록.
- SLA 규칙
  - `pending`: 12시간 초과 시 운영자 배너.
  - `retrying`: 3회 시도 실패 시 `failed`로 전환 + PagerDuty 알림.
- 재시도 버튼 클릭 시 확인 모달: `재시도를 시작할까요? 백오프 정책이 초기화됩니다.`

## 7. 접근성 & 국제화
- 화면 리더: 상태 배지에 `aria-label="보너스 상태: 보류, 재검토 필요"` 식으로 전체 문장 제공.
- 색맹 모드 대비: 배지 테두리 패턴(점선=보류, 실선=실패) 추가.
- 다국어: 핵심 메시지는 `i18n` 키 `bonus.status.pending`, `bonus.alert.failed` 등으로 정의.

## 8. QA 체크리스트
1. 각 상태 전환 시 토스트/배너/배지 동기화 확인.
2. `failed` 상태에서 관리자 CTA(`보너스 큐 열기`)가 정상 동작하는지 검증.
3. 이메일·푸시 템플릿 변수 누락/중복 없는지 확인.
4. `prefers-reduced-motion` 환경에서 토스트/배너 등장 모션 축소.
5. 모바일 환경에서 경고 배너가 화면을 가리지 않는지(닫기 버튼 접근성).

## 9. 후속 작업
- Figma 카피 컴포넌트(`Admin/Bonus/Alerts`, `WebApp/Bonus/StatusCard`) 업데이트.
- 스토리북 스토리: `BonusStatusBadge`, `BonusAlertBanner`, `BonusRetryModal`.
- 백엔드 이벤트 명세(`bonus.status.changed`, `bonus.retry.failed`)와 메시지 키 매핑 문서화.
