# 채굴 & 가맹점 UI 요구사항 초안 (v0.1)

## 1. 범위
- `단계4 · Task2`에서 요구하는 채굴 현황 대시보드, 출금 요청 플로우, 가맹점 POS/QR 결제 화면, 직원 권한 관리 UI를 정의한다.
- 대상 플랫폼: WebApp(모바일 우선, 반응형), 관리자 포털(데스크탑 우선).
- 선행 문서: `docs/uiux/codex_task2_delivery.md`, `docs/uiux/asset_settlement_copy_and_flows.md`, `플랫폼_전산_시스템_명세서_v_1.md`.

## 2. 사용자(WebApp) 채굴 대시보드
- **레아이웃**
  - 모바일 1단 카드 스택, Tablet 이상 2열, Desktop 3열.
  - 상단 Summary 카드: 총 해시, 채굴 자산 합계, 일간 수익.
  - 자산별 카드: 8종 코인(LTC, DOGE, BELLS, LKY, PEP, JKC, DINGO, SHIC) 탭 또는 스와이프 전환.
- **상호작용**
  - 풀다운 리프레시로 최신 데이터 요청, 로딩 시 skeleton shimmer.
  - 자산 카드 클릭 → 상세 모달(채굴율 그래프, 출금 가능액, 최근 5건 내역).
  - 알림 배지: 채굴 이슈(거절율 상승 등) 시 카드 헤더에 경고 아이콘 + 토스트.
- **출금 플로우**
  - 카드 내 `출금 요청` 버튼 → Step Modal(요청 정보 → 보안 확인(Turnstile/OTP) → 완료).
  - 보안 단계에서 정책 불일치 시 오류 상태 표시 및 재시도 CTA.
  - 완료 후 토스트 + 지갑 페이지 링크 제공.
- **접근성**
  - 대비 4.5:1 이상, 포커스 링 `colors.palette.focus`.
  - 그래프는 데이터 테이블 토글 제공(스크린리더용).

## 3. 관리자 채굴 모니터링 뷰
- **대시보드 구성**
  - KPI 카드: 총 해시 파워, 일간 출력, 실패 트랜잭션 수.
  - 테이블: 사용자/코인별 채굴율, 거절율, 상태 태그(정상/지연/검토 필요).
  - 필터: 자산, 기간(일/주/월), 거절율 임계치, 센터.
- **경보 패널**
  - 위험 경보 리스트(상단 고정), 행 클릭 시 사이드 패널 상세 표시(사용자 활동 로그, 최근 출금 요청).
  - `재시도 큐` 현황 카드: 실패 API 호출 건, 처리 상태, 수동 재시도 버튼.
- **상호작용**
  - 테이블 행 hover → Quick Action(출금 보류, 사용자 메모).
  - 사이드 패널 내 `HashDam 로그 보기` 링크(원격 로그 뷰어 호출 API 연동 전제).

## 4. 가맹점 POS/QR 결제 UI
- **사용자(WebApp)**
  - `내 매장 QR` 화면: 매장 선택 드롭다운, 실시간 결제 금액 입력, QR 미리보기.
  - 결제 진행 상태: 생성 → 대기 → 완료 → 실패 4단계 진행 바.
  - 직원 전용 패널: 역할에 따라 버튼 표시(점장: 환불, 캐셔: 결제 기록 확인).
  - 결제 내역: 최근 10건 리스트 + 상태 배지(결제완료/환불/대기), 상세 보기.
- **관리자**
  - 가맹점 목록 테이블: 매장명, 점장, 월매출, 정산일, 위험도.
  - 매장 상세 페이지: POS 설정(세율, 결제 한도), 직원 계정 관리 탭(역할, 초대 상태, 접근 만료일).
  - 권한 토글: `결제`, `환불`, `정산 보고서`, `직원 초대` 권한 개별 스위치.
  - 정산 카드: 월별 그래프 + CSV 내보내기 버튼 + 위험 거래 알림 배너.

## 5. 모바일 플로팅 내비 & 반응형 고려
- 하단 플로팅 내비: 홈, 채굴, 보상, 지갑, 매장. 채굴/매장 탭에 알림 뱃지 적용 가능.
- POS UI는 모바일에서 Bottom Sheet 형태로 결제 내역과 QR을 전환, Tablet 이상은 2패널 레이아웃.
- 직원 권한 변경은 Desktop에서 드래그 테이블, 모바일에서는 액션시트 + 토글 조합.

## 6. 상태/피드백 문구
- 채굴 경고: `채굴률이 기준치보다 낮습니다. 시스템 로그를 확인해주세요.`
- 출금 대기: `출금 승인 대기 중입니다. 검토 완료 후 알림으로 안내할게요.`
- POS 결제 생성: `QR이 생성되었습니다. 5분 내 스캔해주세요.`
- 환불 완료: `환불이 완료되었습니다. 정산 리포트는 24시간 이내 업데이트됩니다.`

## 7. 선행 작업 & 의존성
- HashDam 데이터 시각화 API, 가맹점 정산 API가 제공되어야 실시간 데이터 바인딩 가능.
- 직원 권한 관리 UI는 역할 정의 문서(`docs/planning/platform_system_plan.md`)와 동기화 필요.
- 디자인 토큰에서 채굴/가맹점 색상 강조용 세컨더리 팔레트 확인(`tokens/colors.json`).

## 8. 향후 작업
- 와이어프레임 → 스토리북 컴포넌트 구현 순으로 진행.
- 모바일 접근성 테스트(스크린리더, 키보드 포커스) 체크리스트 작성 예정.
- 사용자 교육 자료에 채굴/가맹점 흐름 포함(FAQ, 튜토리얼 모달).

